<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Snail Game Calculators</title>
    <link rel="icon" type="image/png" href="Eye_of_Horus.png" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Main Calculator Switcher -->
    <div class="calculator-switcher">
      <button id="showGearCalc" class="switcher-btn active">Gear Calculator</button>
      <button id="showRocketCalc" class="switcher-btn">Rocket Cabin Calculator</button>
      <button id="showSteleCalc" class="switcher-btn">Stele Calculator</button>
    </div>

    <!-- ===== GEAR CALCULATOR SECTION ===== -->
<div id="gearCalculator" class="calculator-container">
      <div class="calculator-section">
        <h1>Snail Gear Calculator</h1>
        <div class="info-blurb">
          This calculator helps you plan and optimize your snail and minion gear setups. Use presets to save and load configurations for quick comparisons.
        </div>
        <div class="button-row">
          <button id="resetSnail" class="reset-button">Reset</button>
          <div class="preset-group">
            <div class="preset-set">
              <span class="preset-label">Preset 1:</span>
              <button id="saveSnailPreset1" class="preset-button">Save</button>
              <button id="loadSnailPreset1" class="preset-button">Load</button>
            </div>
            <div class="preset-set">
              <span class="preset-label">Preset 2:</span>
              <button id="saveSnailPreset2" class="preset-button">Save</button>
              <button id="loadSnailPreset2" class="preset-button">Load</button>
            </div>
            <div class="preset-set">
              <span class="preset-label">Preset 3:</span>
              <button id="saveSnailPreset3" class="preset-button">Save</button>
              <button id="loadSnailPreset3" class="preset-button">Load</button>
            </div>
          </div>
        </div>
        <div class="snail-label equipped-label">Equipped</div>
        <div class="snail-row equipped-row" id="snail-row-1"></div>
        <div class="snail-row equipped-row" id="snail-row-2"></div>
        <div class="snail-label unequipped-label">
          Unequipped
          <button id="toggleUnequipped" class="toggle-section-btn" aria-expanded="true" aria-controls="snail-row-3">−</button>
        </div>
        <div class="snail-row unequipped-row" id="snail-row-3"></div>
        <div class="totals-column" id="snail-totals">
          <h3>Snail Gear Costs</h3>
          <div id="snailMainTable"></div>
        </div>
      </div>
      <div class="calculator-section">
        <h1>Minion Gear Calculator</h1>
        <div class="button-row">
          <button id="resetMinion" class="reset-button">Reset</button>
          <div class="preset-group">
            <div class="preset-set">
              <span class="preset-label">Preset 1:</span>
              <button id="saveMinionPreset1" class="preset-button">Save</button>
              <button id="loadMinionPreset1" class="preset-button">Load</button>
            </div>
            <div class="preset-set">
              <span class="preset-label">Preset 2:</span>
              <button id="saveMinionPreset2" class="preset-button">Save</button>
              <button id="loadMinionPreset2" class="preset-button">Load</button>
            </div>
            <div class="preset-set">
              <span class="preset-label">Preset 3:</span>
              <button id="saveMinionPreset3" class="preset-button">Save</button>
              <button id="loadMinionPreset3" class="preset-button">Load</button>
            </div>
          </div>
        </div>
        <div class="minion-label equipped-label">Equipped</div>
        <div class="horizontal-slots equipped-row" id="minion-row-1"></div>
        <div class="minion-label unequipped-label">
          Unequipped
          <button id="toggleMinionUnequipped" class="toggle-section-btn" aria-expanded="true" aria-controls="minion-row-2">−</button>
        </div>
        <div class="horizontal-slots unequipped-row" id="minion-row-2"></div>
        <div class="totals-column" id="minion-totals">
          <h3>Minion Gear Costs</h3>
          <div id="minionMainTable"></div>
        </div>
      </div>
    </div>

    <!-- ===== ROCKET CABIN CALCULATOR SECTION (Initially Hidden) ===== -->
<div id="rocketCalculator" class="calculator-container" style="display: none;">
      <div class="calculator-section">
        <h1>Rocket Cabin Upgrade Calculator</h1>
        <div class="info-blurb">
          Select the target tier for each device. You can now choose how material costs are displayed (T1–T5) using the dropdown beneath each summary table. All totals will update to your selected tier for easier planning.
        </div>

        <!-- Container for the three cabin grids -->
        <div id="rocket-cabins-container"></div>
      </div>
    </div>

    <!-- ===== STELE LEVEL DISTRIBUTION ANALYSIS SECTION (Initially Hidden) ===== -->
    <div id="steleCalculator" class="calculator-container" style="display: none;">
      <div class="calculator-section">
        <h1>Stele Level Distribution Analysis</h1>
<div class="info-blurb">
          This calculator runs 10,000 simulations to estimate the number of tokens needed to reach a selected Stele level, based on the game's token probabilities. Click a Stele level button below to recalculate for that level.
        </div>

        <div class="controls">
          <div class="control-group stele-level-buttons-group">
            <div class="stele-level-btn-row">
              <button class="stele-level-btn" data-stele="5">Stele 5<br><span class="stele-energy">(1000)</span></button>
              <button class="stele-level-btn" data-stele="8">Stele 8<br><span class="stele-energy">(2000)</span></button>
              <button class="stele-level-btn" data-stele="10">Stele 10<br><span class="stele-energy">(3000)</span></button>
              <button class="stele-level-btn" data-stele="12">Stele 12<br><span class="stele-energy">(4000)</span></button>
              <button class="stele-level-btn" data-stele="15">Stele 15<br><span class="stele-energy">(6000)</span></button>
            </div>
          </div>
        </div>

        <div class="stele-stats-outer" id="statsGrid" style="display: none;">
          <div class="stele-stats-row stele-stats-row1">
            <div class="stat-card">
              <div class="stat-value orange" id="stdDevStat">-</div>
              <div class="stat-label">Std Deviation</div>
            </div>
          </div>
          <div class="stele-stats-row stele-stats-row2">
            <div class="stat-card">
              <div class="stat-value green" id="minStat">-</div>
              <div class="stat-label">Minimum</div>
            </div>
            <div class="stat-card">
              <div class="stat-value blue" id="meanStat">-</div>
              <div class="stat-label">Mean</div>
            </div>
            <div class="stat-card">
              <div class="stat-value red" id="maxStat">-</div>
              <div class="stat-label">Maximum</div>
            </div>
          </div>
        </div>

        <div class="chart-container">
          <canvas id="distributionChart"></canvas>
        </div>

        <!-- Token Probability Feature -->
        <div class="stele-token-prob-container" style="margin: 24px 0 12px 0; text-align: center;">
          <label for="steleTokenInput" style="font-weight: bold; margin-right: 8px;">Check your luck:</label>
          <input type="number" id="steleTokenInput" min="1" style="width: 90px; font-size: 1.1em; margin-right: 8px;" placeholder="Tokens">
          <button id="steleTokenCheckBtn" style="font-size: 1em; padding: 3px 16px;">Check</button>
          <div id="steleTokenProbResult" style="margin-top: 10px; font-size: 1.08em; color: #1a237e;"></div>
        </div>

        <div class="info-panel">
          <h3 class="stele-prob-heading" style="margin-bottom: 15px; text-align: center;">Recruit Token Probabilities</h3>
          <div class="stele-prob-row">
            <div class="stele-prob-item"><span class="stele-prob-label">0 Energy</span><span class="stele-prob-value">53.7%</span></div>
            <div class="stele-prob-item"><span class="stele-prob-label">15 Energy</span><span class="stele-prob-value">33.1%</span></div>
            <div class="stele-prob-item"><span class="stele-prob-label">30 Energy</span><span class="stele-prob-value">7.5%</span></div>
            <div class="stele-prob-item"><span class="stele-prob-label">50 Energy</span><span class="stele-prob-value">5.7%</span></div>
            <div class="stele-prob-item stele-prob-expected"><span class="stele-prob-label">Expected/token</span><span class="stele-prob-value">10.065</span></div>
          </div>
        </div>
      </div>
    </div>

    <script src="data.js"></script>
    <script src="script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script type="module" src="stele.js"></script>
    <script data-goatcounter="https://snailcalc.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
  </body>
</html>
